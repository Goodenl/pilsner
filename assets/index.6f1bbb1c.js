var Q=Object.defineProperty,Y=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var O=(e,t,n)=>t in e?Q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,I=(e,t)=>{for(var n in t||(t={}))K.call(t,n)&&O(e,n,t[n]);if(E)for(var n of E(t))J.call(t,n)&&O(e,n,t[n]);return e},V=(e,t)=>Y(e,G(t));import{r as f,a as A,w as L,o as a,c,b as s,d as M,e as X,n as k,f as h,g as m,h as y,F as b,T as j,i as w,j as Z,k as B,V as ee,l as T,m as $,t as p,p as U,v as N,q as te,s as se,u as ne,x as ie,y as oe,z as ae,A as le,B as re,C as ce,D as de}from"./vendor.7992aa77.js";const ue=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}};ue();var v=(e,t)=>{const n=e.__vccOpts||e;for(const[r,o]of t)n[r]=o;return n};const pe={name:"Popup",currentPopupController:null,props:{draggable:Boolean,blockedScreen:Boolean,swipeHide:Boolean},mounted(){document.addEventListener("keydown",this.handleKeydown)},beforeUnmount(){document.removeEventListener("keydown",this.handleKeydown)},data(){return{show:!1}},methods:{swipeHandler(e,t){const n=this.$el.closest(".popup").parentElement.closest(".popup");n&&n.scrollTop==0&&(n.scrollTop=1),this.swipeHide&&t.currentTarget.scrollTop==0&&t.cancelable&&this.close()},handleKeydown(e){this.show&&e.key==="Escape"&&this.close()},open(){let e,t;const n=new Promise((r,o)=>{e=r,t=o});return this.$options.currentPopupController={resolve:e,reject:t},this.show=!0,n},confirm(e=!0){this.$options.currentPopupController.resolve(e),this.closeDown()},close(e=!1){this.blockedScreen||(this.$options.currentPopupController.resolve(e),this.closeDown())},closeDown(){this.show=!1,this.$el.scrollTop=0,document.body.removeAttribute("style")}},watch:{show(e){e?(document.body.style.overflowY!="hidden"&&(document.body.style.overflowY="hidden"),this.$refs.popup&&(this.$refs.popup.style.visibility="visible")):(document.body.style.overflowY="auto",setTimeout(()=>{this.$refs.popup&&(this.$refs.popup.style.visibility="hidden")},350))}}},_e={class:"popup__wrap"},me={class:"popup__content"},he={class:"popup__footer"},fe=y("Close");function ge(e,t,n,r,o,i){const l=f("c-button"),d=A("touch");return L((a(),c("div",{onClick:t[0]||(t[0]=X(_=>i.close(!1),["self"])),ref:"popup",class:k({popup:!0,"popup--show":o.show,"popup--draggable":n.draggable})},[s("div",_e,[s("div",me,[M(e.$slots,"main",{confirm:i.confirm,close:i.close})]),s("footer",he,[M(e.$slots,"footer",{confirm:i.confirm,close:i.close},()=>[h(l,{onClick:i.confirm,class:"btn"},{default:m(()=>[fe]),_:1},8,["onClick"])])])])],2)),[[d,i.swipeHandler,"swipe",{bottom:!0}]])}var P=v(pe,[["render",ge]]),ve="/pilsner/pwa/icons/offline.svg";const be={name:"App",components:{Popup:P},mounted(){navigator.onLine?(window.addEventListener("offline",this.handleConnection),window.addEventListener("online",this.handleConnection)):setTimeout(this.openOfflinePopup,500),this.isIos&&this.isStandaloneMode&&this.$el.parentElement.classList.add("app--ios")},beforeUnmount(){window.removeEventListener("offline",this.handleConnection),window.removeEventListener("online",this.handleConnection)},computed:{isIos(){return/iphone|ipad|ipod/.test(window.navigator.userAgent.toLowerCase())},isStandaloneMode(){return"standalone"in window.navigator&&window.navigator.standalone}},methods:{async openOfflinePopup(){await this.$refs.offlinePopup.open()},handleConnection(){navigator.onLine?this.offlinePopup=!1:this.openOfflinePopup()}}},$e=s("img",{src:ve,alt:"",class:"offline__icon"},null,-1),ke=s("h3",{class:"offline__warning"},"Attention!",-1),ye=s("h2",null,"Internet is not available at the moment",-1),we=s("p",{class:"offline__text"},"You can work on a previously saved version of the content before the link is established, or try again later.",-1),Ce=["onClick"];function xe(e,t,n,r,o,i){const l=f("router-view"),d=f("popup");return a(),c(b,null,[h(l,null,{default:m(({Component:_,route:x})=>[h(j,{name:x.meta.transition||"fade"},{default:m(()=>[(a(),w(Z(_)))]),_:2},1032,["name"])]),_:1}),h(d,{class:"popup--offline",ref:"offlinePopup",draggable:""},{main:m(()=>[$e,ke,ye,we]),footer:m(({confirm:_})=>[s("button",{onClick:_,class:"btn btn--primary"},"Got it",8,Ce)]),_:1},512)],64)}var Le=v(be,[["render",xe]]);const Me={name:"CButton",data(){return{timeout:null}},methods:{tapHandler({currentTarget:e}){e.classList.add("btn--pressed"),this.timeout==null?this.timeout=setTimeout(()=>{e.classList.remove("btn--pressed"),clearTimeout(this.timeout)},600):(clearTimeout(this.timeout),this.timeout=setTimeout(()=>{e.classList.remove("btn--pressed"),clearTimeout(this.timeout)},600))}}};function Te(e,t,n,r,o,i){const l=A("touch");return L((a(),c("button",null,[M(e.$slots,"default")])),[[l,i.tapHandler,"tap"]])}var Pe=v(Me,[["render",Te]]);const Se=e=>{const t=Object.create(null);e.forEach(r=>t[r.id]=V(I({},r),{children:[]}));const n=[];return e.forEach(r=>{var o;r.parent_category?(o=t[r.parent_category])==null||o.children.push(t[r.id]):n.push(t[r.id])}),n},Ue=(e,t)=>{t.splice(t.findIndex(n=>n.id==="1ec87eec-fc2a-6ff4-8958-0025900cf785"),1),e.categories=Se(t)};var He={state:{TM:JSON.parse(localStorage.getItem("TM"))||"\u041F\u0438\u043B\u0437\u043D\u0435\u0440",applications:[],currentApplication:{id:"1ec57fa6-e054-6a8e-87a4-0025900cf785",title:"\u0427\u0435\u0448\u0441\u043A\u0438\u0435 \u043F\u0438\u0432\u043D\u044B\u0435",trademarks:["1ec57fa6-e08b-6a02-907f-0025900cf785","1ec57fa6-e669-637a-b1f6-0025900cf785","1ec57fa6-ec2f-67c8-b40f-0025900cf785"]},categories:[],categoriesTypes:[],menuTree:[],selCategory:{},categoryMenuShow:!0},getters:{getTM(e){return e.TM},getTrademark(e){return e.currentApplication.trademarks[0]},getCategories(e){return e.categories},getMenuTree(e){const t=[];let n=[];const r=o=>{o.length?o.forEach(i=>r(i)):o.children.length?(r(o.children),n.push(...o.positions)):o.positions&&o.positions.length&&n.push(...o.positions)};return e.categories.forEach(o=>{r(o),t.push({title:o.title,parent_category:o.parent_category,selected:!1,children:o.children,positions:o.positions,allPositions:n.length}),n=[]}),e.menuTree=t,e.menuTree},getTabs(e){const t=[];return e.categories.forEach((n,r)=>{t.push({title:n.title,selected:r===0})}),t},getCards(e){const t=[];let n=[];const r=o=>{o.length?o.forEach(i=>r(i)):o.children.length?(n.push(...o.positions),r(o.children)):o.positions&&o.positions.length&&n.push(...o.positions)};return e.categories.length&&e.categories.forEach(o=>{r(o),t.push({id:o.id,title:o.title,positions:n}),n=[]}),t},getCategoriesTypes(e){return cloneDeep(e.categoriesTypes)},getSelCategory(e){return e.selCategory},catalogPositions(e){return e.selCategory.positions},getSelCategoryStore(e){return e.selCategory._vm.store.getNodeById},getCategoryMenuShow(e){return e.categoryMenuShow},getAddresses(e){return e.addresses}},mutations:{setTM(e,t){localStorage.setItem("TM",JSON.stringify(t)),e.TM=t}},actions:{fetchApplications({state:e,getters:t}){B.get("https://api.apps4business.ru/applications").then(n=>(e.applications=n.data,e.currentApplication=n.data[0],B.get(`https://api.apps4business.ru/menu/?trademark=${t.getTrademark||"1ec57fa6-e08b-6a02-907f-0025900cf785"}&expand=type,positions`))).then(n=>{Ue(e,n.data)})},fetchCategoriesTypes({state:e}){B.get("https://api.apps4business.ru/menu/types/").then(t=>{e.categoriesTypes=t.data})}}},Re=new ee.Store({modules:{tm:He}}),qe="/pilsner/pwa/bg/loading-bg-top.webp",Ie="/pilsner/pwa/bg/loading-bg-bottom.webp",Ae="/pilsner/pwa/icons/logo.svg";const Be={name:"Loading",data(){return{loaded:!1}}},De={class:"loading"},Ee=T('<div class="loading__bg-box"><img class="loading__bg loading__bg--top" src="'+qe+'" alt="background top photo"><img class="loading__bg loading__bg--bottom" src="'+Ie+'" alt="background bottom photo"></div><div class="loading__info loading__info--loaded"><img class="loading__logo" src="'+Ae+'" alt="logo"><h2 class="text-white text-center text-huge">Hi,<br>Sergey</h2></div>',2),Oe=[Ee];function Ve(e,t,n,r,o,i){return a(),c("div",De,Oe)}var je=v(Be,[["render",Ve]]);const Ne={name:"TmPopup",props:{blockedScreen:Boolean},components:{Popup:P},data(){return{TMlist:[{imgUrl:this.$getURL("/pwa/icons/pilsner.svg"),title:"\u041F\u0438\u043B\u0437\u043D\u0435\u0440"},{imgUrl:this.$getURL("/pwa/icons/kozlovitsa.svg"),title:"\u041A\u043E\u0437\u043B\u043E\u0432\u0438\u0446\u0430"},{imgUrl:this.$getURL("/pwa/icons/kozlovna.svg"),title:"\u041A\u043E\u0437\u043B\u043E\u0432\u043D\u0430"}]}},methods:{async openTMPopup(){const e=await this.$refs.TMPopup.open();e&&(this.$store.commit("setTM",e),this.$router.push({name:"dashboard"}))}}},We=s("span",{class:"text-tabs-active"},"Choose a chain of restaurants",-1),Fe={class:"popup-TM__list"},ze=["onClick"],Qe=["src","alt"],Ye={class:"text-big-norm"};function Ge(e,t,n,r,o,i){const l=f("popup");return a(),w(l,{blockedScreen:n.blockedScreen,ref:"TMPopup"},{main:m(()=>[We]),footer:m(({confirm:d})=>[s("ul",Fe,[(a(!0),c(b,null,$(o.TMlist,_=>(a(),c("li",{key:_.title,onClick:x=>d(_),class:"popup-TM__item"},[s("img",{src:_.imgUrl,alt:_.title},null,8,Qe),s("span",Ye,p(_.title),1)],8,ze))),128))])]),_:1},8,["blockedScreen"])}var W=v(Ne,[["render",Ge]]);const Ke={name:"Index",components:{Loading:je,TmPopup:W},created(){navigator.onLine&&setTimeout(async()=>await this.$refs.TMPopup.openTMPopup(),4e3)}};function Je(e,t,n,r,o,i){const l=f("loading"),d=f("tm-popup");return a(),c("section",null,[h(l),h(d,{blockedScreen:"",ref:"TMPopup"},null,512)])}var Xe=v(Ke,[["render",Je]]),H="/pilsner/assets/drop-arrow.0b3fcd84.svg",Ze="/pilsner/pwa/picture/panel-about.jpg",et="/pilsner/pwa/picture/panel-qr.svg",tt="/pilsner/pwa/icons/patch-prize.svg",st="/pilsner/pwa/icons/news-promo.svg",nt="/pilsner/pwa/icons/pilsner-title.svg",F="/pilsner/pwa/icons/inst.svg",it="/pilsner/pwa/icons/kozlovna-title.svg";const ot={name:"DashBoard",components:{TmPopup:W},mounted(){this.$store.dispatch("fetchApplications")},data(){return{gridList:[{imgUrl:this.$getURL("/pwa/icons/time.svg"),title:"Booking",classes:[null]},{imgUrl:this.$getURL("/pwa/icons/my-orders.svg"),title:"My orders",classes:["grid-panel__item--accent"]},{imgUrl:this.$getURL("/pwa/icons/lunch-gift.svg"),title:"Lunch-card",classes:["grid-panel__item--accent"]},{imgUrl:this.$getURL("/pwa/icons/lunch.svg"),title:"Business-lunch",classes:[null]},{imgUrl:this.$getURL("/pwa/icons/menu.svg"),title:"Menu",link:{name:"menu"},classes:[null]},{imgUrl:this.$getURL("/pwa/icons/pickup.svg"),title:"Pickup",link:{name:"menu-market"},classes:["grid-panel__item--accent"]},{imgUrl:this.$getURL("/pwa/icons/delivery-table.svg"),title:"Delivery to table",classes:["grid-panel__item--accent"]},{imgUrl:this.$getURL("/pwa/icons/marker.svg"),title:"Restaurants",classes:[null]},{imgUrl:this.$getURL("/pwa/icons/review.svg"),title:"Review",classes:["grid-panel__item--white","text-primary-childs"]},{imgUrl:this.$getURL("/pwa/icons/settings.svg"),title:"Settings",classes:["grid-panel__item--white","text-primary-childs"]}]}},methods:{openTMPopup(){this.$refs.TMPopup.openTMPopup()}}},at={class:"dashboard section"},lt={class:"container"},rt={class:"dashboard__wrap"},ct={class:"dashboard__header header--ios"},dt={class:"container"},ut=s("img",{src:H,alt:""},null,-1),pt=[ut],_t={class:"dashboard__main"},mt={class:"panel__list"},ht=T('<li class="panel__item"><img class="panel__bg" src="'+Ze+'" alt=""><span class="title__about text-white">About us</span></li><li class="panel__item panel__item--primary"><div class="panel__wrap"><div class="panel__text text-white-childs"><h2>Bonus card</h2><p class="text-med-norm panel-bonus">Available</p><span><h2>1280</h2><h4>bonuses</h4></span></div><img class="panel__qr" src="'+et+'" alt=""></div></li>',2),ft={class:"panel__item panel__item--accent"},gt={class:"panel__wrap panel__wrap--p20"},vt=s("img",{class:"panel__patch",src:tt,alt:""},null,-1),bt={class:"panel__text text-white-childs"},$t=s("h2",null,"Patch card",-1),kt=s("p",{class:"panel-patch"},"Activity",-1),yt={class:"panel__patch-list"},wt=["src"],Ct=s("li",{class:"panel__item"},[s("div",{class:"panel__wrap panel__wrap--news-promo"},[s("img",{src:st,alt:""}),s("h2",null,"News and Stock")])],-1),xt={class:"grid-panel__list text-white-childs"},Lt=["onClick"],Mt={class:"grid-panel__img"},Tt=["src"],Pt={class:"grid-panel__text"},St={class:"text-big-bold"},Ut=T('<footer class="dashboard__footer"><ul class="soc__list"><li class="soc__item"><img src="'+nt+'" alt="" class="soc__title"><img src="'+F+'" alt="" class="soc__icon"></li><li class="soc__item"><img src="'+F+'" alt="" class="soc__icon"><img src="'+it+'" alt="soc" class="soc__title"></li></ul></footer>',1);function Ht(e,t,n,r,o,i){const l=f("tm-popup");return a(),c("section",at,[s("div",lt,[s("div",rt,[s("header",ct,[s("div",dt,[s("h1",null,p(e.$store.getters.getTM.title),1),s("div",{onClick:t[0]||(t[0]=(...d)=>i.openTMPopup&&i.openTMPopup(...d)),class:"dashboard__drop-arrow"},pt)])]),s("main",_t,[s("ul",mt,[ht,s("li",ft,[s("div",gt,[vt,s("div",bt,[$t,kt,s("ul",yt,[(a(!0),c(b,null,$(Array(5),(d,_)=>(a(),c("li",{key:d,class:k({"panel__patch-item":!0,"panel__patch-item--has":_<=2})},[s("img",{src:_<=2?e.$getURL("/pwa/icons/patch-has.svg"):e.$getURL("/pwa/icons/patch.svg"),alt:""},null,8,wt)],2))),128))])])])]),Ct]),s("ul",xt,[(a(!0),c(b,null,$(o.gridList,d=>(a(),c("li",{key:d.title,class:k(["grid-panel__item",...d.classes]),onClick:_=>e.$router.push(d.link)},[s("div",Mt,[s("img",{src:d.imgUrl,alt:""},null,8,Tt)]),s("div",Pt,[s("p",St,p(d.title),1)])],10,Lt))),128))])]),Ut])]),h(l,{ref:"TMPopup"},null,512)])}var Rt=v(ot,[["render",Ht]]),qt="/pilsner/assets/popup-menu.730276f5.jpg",It="/pilsner/assets/popup-menu-arrow.95af6d2d.svg";const At={name:"MenuPopupItem",props:{item:Object,confirm:Function},computed:{lastChild(){return Boolean(this.item.children==null)},lastParent(){var e;return this.lastChild?!1:!Boolean((e=this.item.children)==null?void 0:e.length)},nextItemRender(){return this.lastParent?this.item.positions:this.item.children}},methods:{toggleMenuItem(){if(this.item.selected=!this.item.selected,this.lastChild){const e=this.$store.getters.getCards.find(t=>t.positions.includes(this.item));this.selTabHandle(e)}},selTabHandle(e){this.confirm(e)}}},Bt={class:"popup-menu__item"},Dt={key:0,class:"popup-menu__img",src:qt,alt:""},Et={key:1,class:"popup-menu__arrow",src:It,alt:""},Ot={key:2,class:"popup-menu__last-marker"},Vt={key:3,class:"popup-menu__position-count text-accent-childs"},jt=s("span",{class:"text-small"},"\u043F\u043E\u0437.",-1),Nt={key:4,class:"popup-menu__position-action"},Wt=s("img",{src:H,alt:""},null,-1),Ft=[Wt];function zt(e,t,n,r,o,i){const l=f("menu-popup-item",!0);return a(),w(j,{name:"grow",mode:"out-in"},{default:m(()=>[s("li",Bt,[s("div",{onClick:t[0]||(t[0]=(...d)=>i.toggleMenuItem&&i.toggleMenuItem(...d)),class:k({"popup-menu__item-content":!0,"popup-menu__item-content--selected":n.item.selected&&!i.lastChild,"popup-menu__item-content--last":i.lastChild})},[!n.item.parent_category&&!i.lastChild?(a(),c("img",Dt)):i.lastChild?(a(),c("span",Ot)):(a(),c("img",Et)),s("h3",{class:k({"text-med-norm":i.lastChild})},p(n.item.title),3),!i.lastChild&&(n.item.children.length||!n.item.parent_category)?(a(),c("div",Vt,[s("h3",null,p(n.item.allPositions),1),jt])):i.lastChild?(a(),c("div",Nt,Ft)):U("",!0)],2),(a(!0),c(b,null,$(i.nextItemRender,d=>L((a(),w(l,{key:d.title,item:d,confirm:n.confirm},null,8,["item","confirm"])),[[N,n.item.selected]])),128))])]),_:1})}var Qt=v(At,[["render",zt]]);const Yt={name:"MenuPopupTree",components:{MenuPopupItem:Qt},props:{list:Array,confirm:Function}},Gt={class:"popup-menu__list"};function Kt(e,t,n,r,o,i){const l=f("menu-popup-item");return a(),c("ul",Gt,[(a(!0),c(b,null,$(n.list,d=>(a(),w(l,{key:d.title,item:d,confirm:n.confirm},null,8,["item","confirm"]))),128))])}var Jt=v(Yt,[["render",Kt]]);const Xt={name:"RadioPicker",emits:{"update:modelValue":null},props:{childs:Array,name:String,modelValue:String},methods:{selectedHandle(){this.$emit("update:modelValue",this.modelValue)}}},Zt={class:"picker__list"},es={class:"picker__label"},ts=["name","value"],ss=s("span",{class:"picker__marker picker__marker--radio"},null,-1);function ns(e,t,n,r,o,i){return a(),c("ul",Zt,[s("h3",null,[M(e.$slots,"title")]),(a(!0),c(b,null,$(n.childs,l=>(a(),c("li",{key:l.title,class:"picker__item"},[s("label",es,[L(s("input",{name:n.name,value:l.title,"onUpdate:modelValue":t[0]||(t[0]=d=>n.modelValue=d),type:"radio",onChange:t[1]||(t[1]=(...d)=>i.selectedHandle&&i.selectedHandle(...d))},null,40,ts),[[te,n.modelValue]]),ss,M(e.$slots,"default",{child:l},()=>[s("p",null,p(l.title),1)])])]))),128))])}var is=v(Xt,[["render",ns]]);const os={name:"CheckboxPicker",props:{childs:Array},methods:{quantityHandle(e){e.selected&&e.quantity==0&&(e.quantity=1)}}},as={class:"picker__list"},ls={class:"picker__label"},rs=["onUpdate:modelValue","onChange"],cs=s("span",{class:"picker__marker picker__marker--checkbox"},null,-1);function ds(e,t,n,r,o,i){return a(),c("ul",as,[s("h3",null,[M(e.$slots,"title")]),(a(!0),c(b,null,$(n.childs,l=>(a(),c("li",{key:l.title,class:"picker__item"},[s("label",ls,[L(s("input",{"onUpdate:modelValue":d=>l.selected=d,onChange:d=>i.quantityHandle(l),type:"checkbox"},null,40,rs),[[se,l.selected]]),cs,M(e.$slots,"default",{child:l},()=>[s("p",null,p(l.title),1)])])]))),128))])}var us=v(os,[["render",ds]]),z="/pilsner/assets/spicy.be8e3f9b.svg",R="/pilsner/assets/vegan.0c78abb6.svg";const ps={name:"PositionMenu",components:{RadioPicker:is,CheckboxPicker:us,Popup:P},props:{item:Object,close:Function},preventQuantity:void 0,data(){return{meal:{name:"",price:750,quantity:1},fullDescription:!1,radioPickerList:[{title:"Basis of choice",name:"main",selected:"\u0420\u0438\u0441",childs:[{title:"\u0420\u0438\u0441",price:"0"},{title:"Rice noodles",price:"0"},{title:"Wheat noodles",price:"0"}]},{title:"Filling of your choice",name:"inner",selected:"Chicken",childs:[{title:"Chicken",price:"50"},{title:"Pork",price:"70"},{title:"Beef",price:"100"},{title:"Shrimps",price:"150"},{title:"Vegetables",price:"0"}]}],checkboxPicker:{title:"Additional ingredients to choose from",childs:[{title:"Chicken",selected:!1,quantity:0,price:"100"},{title:"Pork",selected:!1,quantity:0,price:"70"},{title:"Beef",selected:!1,quantity:0,price:"100"},{title:"Shrimps",selected:!1,quantity:0,price:"150"}]},markerList:[{svgId:"vegan",title:"vegan dish, no animal oil added"},{svgId:"spicy",title:"spicy dish"},{svgId:"kosh",title:"kosher dish"},{svgId:"halal",title:"halal dish"}],energyValues:[{title:"Energy value",value:"256,8 kcal"},{title:"Squirrels",value:"10,7g"},{title:"Fats",value:"8,4g"},{title:"Carbohydrates",value:"33g"}]}},computed:{mealDescription(){var t,n;const e=(t=this.item.description)==null?void 0:t.split(/\s+/).splice(0,5).toString();return this.fullDescription?(n=this.item)==null?void 0:n.description:(e==null?void 0:e.slice(0,-1))+"..."}},methods:{changeQuantity(e,t,n=!1){n?t.toLowerCase().trim()=="plus"?e.count++:t.toLowerCase().trim()=="minus"&&e.count>1&&e.count--:t.toLowerCase().trim()=="plus"?e.quantity++:t.toLowerCase().trim()=="minus"&&e.quantity>1?e.quantity--:e.quantity==1&&(e.selected=!1)},toggleDescription(){this.fullDescription=!this.fullDescription},async markerPopupHandle(e){await this.$refs.markerPopup.open()},async energyPopupHandle(e){await this.$refs.energyPopup.open()}},watch:{item(){this.item.count=1,this.checkboxPicker.childs.map(e=>{e.quantity=0,e.selected=!1})}}},_s={class:"position-menu section"},ms={class:"position-menu__header"},hs=["src"],fs={class:"position-menu__actions header--ios container"},gs=s("img",{src:H,alt:""},null,-1),vs=[gs],bs={class:"btn--circle btn--white"},$s=["xlink:href"],ks=s("span",{class:"position-menu__promo-text"},"Promotion",-1),ys=T('<li class="menu-card__icons-item menu-card__icons-item--position"><img src="'+z+'" alt=""></li><li class="menu-card__icons-item menu-card__icons-item--position"><img src="'+R+'" alt=""></li><li class="menu-card__icons-item menu-card__icons-item--position"><img src="'+R+'" alt=""></li>',3),ws=[ys],Cs={class:"position-menu__main container"},xs=s("span",{class:"text-big-norm text-grey"},"Art. 157890",-1),Ls={class:"position-menu__title"},Ms=["xlink:href"],Ts={class:"text-big-norm"},Ps=s("svg",{width:"6",height:"3",viewBox:"0 0 12 7",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M1 1L6 6L11 1",stroke:"#47474A","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),Ss={class:"text-big-norm"},Us={class:"text-big-bold"},Hs=s("span",{class:"text-big-middle"},"\u20B4",-1),Rs={class:"text-big-norm"},qs={class:"text-big-bold"},Is=s("span",{class:"text-big-middle"},"\u20B4",-1),As={class:"menu-card__quantity menu-card__quantity--position-menu"},Bs=y("-"),Ds={class:"menu-card__quantity-count"},Es=y("+"),Os={class:"position-menu__footer"},Vs={class:"position-menu__total-price"},js=s("div",{class:"position-menu__name"},[s("span",{class:"text-big-bold"},"Vok"),s("span",{class:"text-big-middle text-grey"},"450 \u0433")],-1),Ns={class:"text-accent text-accent-childs"},Ws=s("span",{class:"currency"},"\u20B4",-1),Fs=s("p",{class:"text-med-norm text-grey"},"Rise spagetti, chiken",-1),zs={class:"position-menu__footer-action"},Qs={class:"menu-card__quantity menu-card__quantity--position-menu"},Ys=y(" - "),Gs={class:"text-big-bold"},Ks=y(" + "),Js=y("Add"),Xs=s("span",{class:"text-tabs-active"},"Markering meal",-1),Zs={class:"popup-marker__list"},en={class:"popup-marker__icon"},tn=["xlink:href"],sn={class:"text-big-norm"},nn=["onClick"],on=s("span",{class:"text-tabs-active"},"Nutritional value of the dish per 100 g.",-1),an={class:"popup-marker__list"},ln={class:"text-big-bold"},rn={class:"popup-marker__item popup-marker__item--weight"},cn=s("span",{class:"text-big-norm"},"Weight",-1),dn={class:"text-big-bold"},un=["onClick"];function pn(e,t,n,r,o,i){const l=f("radio-picker"),d=f("c-button"),_=f("checkbox-picker"),x=f("popup");return a(),c("section",_s,[s("header",ms,[s("img",{ref:"positionImage",src:n.item.image||e.$getURL("/img/picture/not-photo.jpg"),alt:"",class:"position-menu__img"},null,8,hs),s("div",fs,[s("button",{onClick:t[0]||(t[0]=(...u)=>n.close&&n.close(...u)),class:"btn--circle btn--white"},vs),s("button",bs,[(a(),c("svg",null,[s("use",{"xlink:href":e.$getURL("/pwa/icons/nav-pack.svg#cart")},null,8,$s)]))])]),ks,s("ul",{onClick:t[1]||(t[1]=(...u)=>i.markerPopupHandle&&i.markerPopupHandle(...u)),class:"menu-card__icons-list menu-card__icons-list--position"},ws)]),s("main",Cs,[xs,s("div",Ls,[s("h2",null,p(n.item.title||"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0431\u043B\u044E\u0434\u0430"),1),(a(),c("svg",{onClick:t[2]||(t[2]=(...u)=>i.energyPopupHandle&&i.energyPopupHandle(...u)),class:"position-menu__title-info"},[s("use",{"xlink:href":e.$getURL("/pwa/icons/nav-pack.svg#info")},null,8,Ms)]))]),s("p",Ts,p(i.mealDescription),1),s("button",{onClick:t[3]||(t[3]=(...u)=>i.toggleDescription&&i.toggleDescription(...u)),class:k({"btn--clear text-accent-childs position-menu__read-more":!0,"position-menu__read-more--opened":this.fullDescription})},[s("span",null,p(o.fullDescription?"Close":"Read more"),1),Ps],2),(a(!0),c(b,null,$(o.radioPickerList,u=>(a(),w(l,{key:u.title,name:u.name,modelValue:u.selected,"onUpdate:modelValue":g=>u.selected=g,childs:u.childs},{title:m(()=>[y(p(u.title),1)]),default:m(({child:g})=>[s("div",{class:k({picker__between:!0,"picker--selected":u.selected==g.title})},[s("p",Ss,p(g.title),1),s("span",Us,[y(" +"+p(g.price)+" ",1),Hs])],2)]),_:2},1032,["name","modelValue","onUpdate:modelValue","childs"]))),128)),h(_,{childs:o.checkboxPicker.childs},{title:m(()=>[y(p(o.checkboxPicker.title),1)]),default:m(({child:u})=>[s("div",{class:k({"picker__checkbox-content":!0,"picker--selected":u.selected})},[s("p",Rs,p(u.title),1),s("span",qs,[y(" +"+p(u.price*u.quantity||u.price)+" ",1),Is]),L(s("div",As,[h(d,{onClick:g=>i.changeQuantity(u,"minus"),class:"btn btn--outline"},{default:m(()=>[Bs]),_:2},1032,["onClick"]),s("span",Ds,p(u.quantity),1),h(d,{onClick:g=>i.changeQuantity(u,"plus"),class:"btn btn--outline"},{default:m(()=>[Es]),_:2},1032,["onClick"])],512),[[N,u.selected]])],2)]),_:1},8,["childs"])]),s("footer",Os,[s("div",Vs,[js,s("h3",Ns,[y("+"+p(n.item.price*n.item.count||n.item.price)+" ",1),Ws])]),Fs,s("div",zs,[s("div",Qs,[h(d,{onClick:t[4]||(t[4]=u=>i.changeQuantity(n.item,"minus",!0)),class:"btn btn--outline-grey",blocked:n.item.count==1},{default:m(()=>[Ys]),_:1},8,["blocked"]),s("span",Gs,p(n.item.count),1),h(d,{onClick:t[5]||(t[5]=u=>i.changeQuantity(n.item,"plus",!0)),class:"btn btn--outline-grey"},{default:m(()=>[Ks]),_:1})]),h(d,{class:"btn"},{default:m(()=>[Js]),_:1})])]),h(x,{class:"popup--marker",ref:"markerPopup"},{main:m(()=>[Xs]),footer:m(({confirm:u})=>[s("ul",Zs,[(a(!0),c(b,null,$(o.markerList,g=>(a(),c("li",{key:g.title,class:"popup-marker__item"},[(a(),c("svg",en,[s("use",{"xlink:href":e.$getURL(`/pwa/icons/marker-pack.svg#${g.svgId}`)},null,8,tn)])),s("span",sn,p(g.title),1)]))),128))]),s("button",{onClick:u,class:"btn btn--primary"},"Got it",8,nn)]),_:1},512),h(x,{class:"popup--energy",ref:"energyPopup"},{main:m(()=>[on]),footer:m(({confirm:u})=>[s("ul",an,[(a(!0),c(b,null,$(o.energyValues,(g,q)=>(a(),c("li",{key:g.title,class:"popup-marker__item"},[s("span",{class:k([q==0?"text-big-bold":"text-big-norm"])},p(g.title),3),s("span",ln,p(g.value),1)]))),128)),s("li",rn,[cn,s("span",dn,p(n.item.weight),1)])]),s("button",{onClick:u,class:"btn btn--primary"},"Got it",8,un)]),_:1},512)])}var _n=v(ps,[["render",pn]]),mn="/pilsner/assets/more.9024127f.svg",hn="/pilsner/assets/special-board.04dd8a5b.jpg";const fn={name:"MenuSpecial",data(){return{}}},gn={class:"menu-special"},vn=T('<div class="container"><div class="menu-special__title"><h2>Stock</h2><img class="menu-special__more" src="'+mn+'" alt=""></div><div class="menu-special__board"><img class="menu-special__bg" src="'+hn+'" alt=""><div class="menu-special__text text-white-childs"><h3>Discount -20% on delivery</h3><p class="text-small"> A very advantageous offer. Only for you and only today. Do not miss! </p></div></div></div>',1),bn=[vn];function $n(e,t,n,r,o,i){return a(),c("div",gn,bn)}var kn=v(fn,[["render",$n]]),yn="/pilsner/assets/info.cd37849b.svg";const wn={name:"MenuCard",props:{card:Object},computed:{formatedWeight(){return this.card.weight},formatedPrice(){return this.card.weight}},methods:{changeQuantity(e,t){t.toLowerCase().trim()=="plus"?e.quantity++:t.toLowerCase().trim()=="minus"&&e.quantity&&e.quantity--},openDetail(){this.$emit("openDetail")}}},Cn={key:0,class:"menu-card__item"},xn={key:0,class:"menu-card__promo-text"},Ln={alt:"position",class:"menu-card__img"},Mn=T('<div class="menu-card__icons"><img src="'+yn+'" alt="" class="menu-card__info"><ul class="menu-card__icons-list"><li class="menu-card__icons-item"><img src="'+z+'" alt=""></li><li class="menu-card__icons-item"><img src="'+R+'" alt=""></li><li class="menu-card__icons-item"><img src="'+R+'" alt=""></li></ul></div>',1),Tn={class:"menu-card__footer"},Pn={class:"menu-card__text"},Sn={key:0,class:"text-med-norm text-primary-light"},Un={key:1,class:"text-med-norm text-primary-light menu-card__quantity-text"},Hn={class:"text-med-bold text-accent"},Rn=s("h3",{class:"text-white"},"545 \u20B4",-1),qn={key:1,class:"menu-card__quantity"},In=y("-"),An={class:"menu-card__quantity-count"},Bn=y("+");function Dn(e,t,n,r,o,i){const l=f("c-button"),d=A("lazy");return n.card?(a(),c("li",Cn,[s("div",{onClick:t[0]||(t[0]=(..._)=>i.openDetail&&i.openDetail(..._)),class:"menu-card__header"},[n.card.promo?(a(),c("span",xn,"Promotion")):U("",!0),L(s("img",Ln,null,512),[[d,n.card.image||e.$getURL("/img/picture/not-photo.jpg")]]),Mn]),s("div",Tn,[s("div",Pn,[s("h4",null,p(n.card.title),1),n.card.quantity==null?(a(),c("span",Sn,p(i.formatedWeight),1)):(a(),c("p",Un,[s("span",Hn,p(n.card.price)+" \u20B4",1),s("span",null,"/ "+p(i.formatedWeight),1)]))]),n.card.quantity==null?(a(),w(l,{key:0,class:"btn"},{default:m(()=>[Rn]),_:1})):(a(),c("div",qn,[h(l,{onClick:t[1]||(t[1]=_=>i.changeQuantity(n.card,"minus")),class:"btn"},{default:m(()=>[In]),_:1}),s("span",An,p(n.card.quantity),1),h(l,{onClick:t[2]||(t[2]=_=>i.changeQuantity(n.card,"plus")),class:"btn"},{default:m(()=>[Bn]),_:1})]))])])):U("",!0)}var En=v(wn,[["render",Dn]]);const On={name:"MenuCards",components:{MenuCard:En},props:{cards:Object}},Vn={class:"menu-card"},jn={class:"menu-card__list"};function Nn(e,t,n,r,o,i){const l=f("menu-card");return a(),c("li",Vn,[s("h1",null,p(n.cards.title),1),s("ul",jn,[(a(!0),c(b,null,$(n.cards.positions,d=>(a(),w(l,{card:d,onOpenDetail:_=>e.$emit("openDetail",d),class:"menu-card__item"},null,8,["card","onOpenDetail"]))),256))])])}var Wn=v(On,[["render",Nn]]),Fn="/pilsner/assets/more-tabs.a8f0058a.svg";const zn={name:"MenuTabs",components:{Popup:P},props:{tabs:Array,isMarket:Boolean},emits:{selTabHandle:null,fullMenuPopupHandle:null},mounted(){this.changeOnScroll(),window.addEventListener("scroll",this.scrollHandle,{passive:!0})},beforeUnmount(){window.removeEventListener("scroll",this.scrollHandle)},data(){return{lastCur:""}},computed:{tabsListWidth(){return this.$refs.tabList.clientWidth}},methods:{selTab(e){this.tabs.map(t=>t.selected=!1),e.selected=!0,this.$emit("selTabHandle",e)},scrollHandle(){this.changeOnScroll();const e=this.$refs.tabList.children,t=document.querySelectorAll("li.menu-card");let n=window.pageYOffset+123+40,r=[...t].filter(i=>i.offsetTop<n),o=r[r.length-1].id;if(this.lastCur!==o){this.lastCur=o;const i=document.querySelector(`li[data-link="${o}"]`);for(let l of e)l.classList.remove("menu-tab__item--active");i==null||i.classList.add("menu-tab__item--active"),(i.offsetLeft>this.tabsListWidth||i.offsetLeft<this.tabsListWidth+i.offsetParent.scrollLeft)&&i.offsetParent.scrollTo({behavior:"smooth",top:0,left:i.offsetLeft}),r=[]}},changeOnScroll(){this.isMarket&&(document.documentElement.scrollTop>=250?(document.querySelector(".menu-sheets__cards").classList.add("menu-sheets__cards--fixed-tabs"),this.$el.classList.add("menu-tab--fixed")):(document.querySelector(".menu-sheets__cards").classList.remove("menu-sheets__cards--fixed-tabs"),this.$el.classList.remove("menu-tab--fixed")))},fullMenuPopupHandle(){this.$emit("fullMenuPopupHandle")}}},Qn={class:"menu-tab header--ios"},Yn={class:"menu-tab__list",ref:"tabList"},Gn=["data-link","onClick"];function Kn(e,t,n,r,o,i){return a(),c("div",Qn,[s("img",{onClick:t[0]||(t[0]=(...l)=>i.fullMenuPopupHandle&&i.fullMenuPopupHandle(...l)),src:Fn,alt:"more",class:"menu-tab__more-tabs"}),s("ul",Yn,[(a(!0),c(b,null,$(n.tabs,l=>(a(),c("li",{class:k(["menu-tab__item","text-tabs-norm",l.selected?"menu-tab__item--active":""]),"data-link":e.$globalLink(l.title),onClick:d=>i.selTab(l)},p(l.title),11,Gn))),256))],512)])}var Jn=v(zn,[["render",Kn]]);const Xn={name:"NavBar",data(){return{navs:[{svgId:"dashboard",selected:!1,title:"Menu"},{svgId:"info",selected:!1,title:"Terms"},{svgId:"menu",selected:!0,title:"Catalog"},{svgId:"delivery",selected:!1,title:"Delivery"},{svgId:"cart",selected:!1,title:"Cart"}]}},computed:{isIos(){return/iphone|ipad|ipod/.test(window.navigator.userAgent.toLowerCase())}},methods:{selNav(e){this.navs.map(t=>t.selected=!1),this.$router.push({name:e.svgId}),e.selected=!0}}},Zn={class:"nav-bar__list"},ei=["onClick"],ti={class:"nav-bar__icon"},si=["xlink:href"],ni={class:"text-small-menu"};function ii(e,t,n,r,o,i){return a(),c("nav",{class:k({"nav-bar":!0,"nav-bar--ios":i.isIos})},[s("ul",Zn,[(a(!0),c(b,null,$(o.navs,l=>(a(),c("li",{class:k({"nav-bar__item":!0,"nav-bar__item--selected":l.selected}),onClick:d=>i.selNav(l)},[(a(),c("svg",ti,[s("use",{"xlink:href":e.$getURL(`/pwa/icons/nav-pack.svg#${l.svgId}`)},null,8,si)])),s("span",ni,p(l.title),1)],10,ei))),256))])],2)}var oi=v(Xn,[["render",ii]]),ai="/pilsner/assets/prize.f1c84496.svg",li="/pilsner/assets/search.fdf77fe3.svg",ri="/pilsner/assets/crossline.e50af867.svg",ci="/pilsner/assets/reload.9a81db51.svg";const di={async beforeRouteLeave(){document.body.removeAttribute("style"),this.$refs.fullMenuPopup.close(),await this.$refs.positionMenu.close()},name:"MenuSheets",components:{MenuPopupTree:Jt,PositionMenu:_n,MenuSpecial:kn,MenuCards:Wn,MenuTabs:Jn,NavBar:oi,Popup:P},props:{isMarket:Boolean},mounted(){this.$store.getters.getTabs.length||this.$store.dispatch("fetchApplications")},beforeUnmounted(){document.body.removeAttribute("style")},data(){return{selItem:{}}},computed:I({},ne({menuTreeList:"getMenuTree"})),methods:{selHandle({title:e}){const t=document.querySelector(`li#${this.$globalLink(e)}`);window.scrollTo({behavior:"smooth",top:(t==null?void 0:t.offsetTop)-40,left:0})},selMenuHandle(e){setTimeout(()=>{const t=n=>{n.map(r=>{r.selected=!1,r.childs&&t(r.childs)})};t(this.menuTreeList)},500),this.selHandle(e)},animateReload(e){this.$store.dispatch("fetchApplications").then(),e.target.classList.contains("popup-menu__reload--pressed")||(e.target.classList.add("popup-menu__reload--pressed"),setTimeout(()=>e.target.classList.remove("popup-menu__reload--pressed"),300))},async openDetail(e){this.selItem=e,document.body.style.background=`url(${this.$refs.position.$refs.positionImage.src}) no-repeat`,await this.$refs.positionMenu.open()&&document.body.removeAttribute("style")},async fullMenuPopupHandle(){const e=await this.$refs.fullMenuPopup.open();e&&this.selMenuHandle(e)}}},ui=T('<header class="menu-sheets__header header--ios"><div class="container"><div class="menu-sheets__address"><h2 class="text-big-middle"> Current address </h2><img src="'+H+'" alt=""></div><div class="menu-sheets__actions"><img src="'+ai+'" alt=""><img src="'+li+'" alt=""></div></div></header>',1),pi={class:"menu-sheets__main"},_i={class:"menu-sheets__menu menu-sheets__menu"},mi={class:"container"},hi={class:"menu-sheets__cards"},fi={class:"popup-menu__header"},gi=["onClick"],vi=s("h3",null,"\u041D\u0430\u0448\u0435 Menu",-1);function bi(e,t,n,r,o,i){const l=f("menu-special"),d=f("menu-tabs"),_=f("menu-cards"),x=f("nav-bar"),u=f("menu-popup-tree"),g=f("popup"),q=f("position-menu");return a(),c("section",{class:k({"menu-sheets section":!0,"menu-sheets--market":n.isMarket})},[ui,s("main",pi,[n.isMarket?(a(),w(l,{key:0})):U("",!0),s("div",_i,[s("div",mi,[h(d,{isMarket:n.isMarket,tabs:this.$store.getters.getTabs,onSelTabHandle:i.selHandle,onFullMenuPopupHandle:i.fullMenuPopupHandle},null,8,["isMarket","tabs","onSelTabHandle","onFullMenuPopupHandle"]),s("ul",hi,[(a(!0),c(b,null,$(this.$store.getters.getCards,C=>(a(),w(_,{onOpenDetail:i.openDetail,cards:C,id:this.$globalLink(C.title)},null,8,["onOpenDetail","cards","id"]))),256))])])])]),s("footer",null,[h(x)]),h(g,{ref:"fullMenuPopup"},{main:m(({close:C})=>[s("div",fi,[s("img",{onClick:D=>C(!1),src:ri,alt:"Close"},null,8,gi),vi,s("img",{onClick:t[0]||(t[0]=(...D)=>i.animateReload&&i.animateReload(...D)),class:"popup-menu__reload",src:ci,alt:"\u041F\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C"})])]),footer:m(({confirm:C})=>[h(u,{list:e.menuTreeList,confirm:C},null,8,["list","confirm"])]),_:1},512),h(g,{class:"popup-position",ref:"positionMenu",swipeHide:""},{footer:m(({confirm:C})=>[h(q,{ref:"position",item:o.selItem,close:C},null,8,["item","close"])]),_:1},512)],2)}var S=v(di,[["render",bi]]);const $i=[{path:"/",name:"index",component:Xe},{path:"/dashboard",name:"dashboard",component:Rt},{path:"/menu",name:"menu",component:S,meta:{transition:"none"}},{path:"/menu-market",name:"menu-market",component:S,props:{isMarket:!0},meta:{transition:"none"}},{path:"/delivery",name:"delivery",component:S},{path:"/cart",name:"cart",component:S},{path:"/info",name:"info",component:S},{path:"/:pathMatch(.*)*",redirect:{name:"index"}}],ki=ie({history:oe("/pilsner/"),routes:$i,scrollBehavior(){return{top:0}}});var yi={install:e=>{e.config.globalProperties.$getURL=t=>"/pilsner/"+(t.startsWith("/")?t.slice(1):t)}},wi={install:e=>{e.config.globalProperties.$globalLink=t=>t==null?void 0:t.toLowerCase().trim().replaceAll(" ","_")}};function Ci(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:o,onRegisterError:i}=e;let l;const d=async(_=!0)=>{};return"serviceWorker"in navigator&&(l=new ae("/pilsner/sw.js",{scope:"/pilsner/",type:"classic"}),l.addEventListener("activated",_=>{_.isUpdate?window.location.reload():r==null||r()}),l.register({immediate:t}).then(_=>{o==null||o(_)}).catch(_=>{i==null||i(_)})),d}Ci({onRegistered(e){e.update(),e&&setInterval(()=>{e.update()},60*60*1e3)}});le.polyfill();re(Le).use(ki).use(Re).use(yi).use(wi).use(ce).use(de).component("CButton",Pe).mount("#app");
