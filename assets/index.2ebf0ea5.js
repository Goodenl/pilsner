import{r as k,w as P,o as p,c as _,a as s,b,d as T,n as f,e as d,f as m,g,F as u,V as M,h as v,i as x,j as w,t as $,k as R,l as C,v as S,m as E,p as O}from"./vendor.d5a2c40e.js";const B=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}};B();var h=(e,t)=>{const r=e.__vccOpts||e;for(const[c,o]of t)r[c]=o;return r};const N={name:"Popup",currentPopupController:null,props:{draggable:Boolean,blockedScreen:Boolean},mounted(){document.addEventListener("keydown",this.handleKeydown)},beforeUnmount(){document.removeEventListener("keydown",this.handleKeydown)},data(){return{show:!1}},methods:{swipeHandler(e,t){this.draggable&&(!t.target.closest(".popup__content")||t.cancelable)&&this.close()},handleKeydown(e){this.show&&e.key==="Escape"&&this.close()},open(){let e,t;const r=new Promise((c,o)=>{e=c,t=o});return this.$options.currentPopupController={resolve:e,reject:t},this.show=!0,r},confirm(e=!0){this.$options.currentPopupController.resolve(e),this.show=!1},close(e=!1){this.blockedScreen||(this.$options.currentPopupController.resolve(e),this.show=!1)}},watch:{show(e){e?(document.body.style.overflowY!="hidden"&&(document.body.style.overflowY="hidden"),this.$refs.popup&&(this.$refs.popup.style.visibility="visible")):(document.body.style.overflowY="auto",setTimeout(()=>{this.$refs.popup&&(this.$refs.popup.style.visibility="hidden")},350))}}},A={class:"popup__wrap"},j={class:"popup__content"},z={class:"popup__footer"};function D(e,t,r,c,o,n){const l=k("touch");return P((p(),_("div",{onClick:t[1]||(t[1]=T(i=>n.close(!1),["self"])),ref:"popup",class:f({popup:!0,"popup--show":o.show,"popup--draggable":r.draggable})},[s("div",A,[s("div",j,[b(e.$slots,"main")]),s("footer",z,[b(e.$slots,"footer",{confirm:n.confirm,close:n.close},()=>[s("button",{onClick:t[0]||(t[0]=(...i)=>n.confirm&&n.confirm(...i)),class:"btn"},"\u0417\u0430\u043A\u0440\u044B\u0442\u044C")])])])],2)),[[l,n.swipeHandler,"swipe",{bottom:!0}]])}var y=h(N,[["render",D]]),V="/pilsner/pwa/icons/offline.svg";const W={name:"App",components:{Popup:y},mounted(){navigator.onLine?(window.addEventListener("offline",this.handleConnection),window.addEventListener("online",this.handleConnection)):setTimeout(this.openOfflinePopup,500)},beforeUnmount(){window.removeEventListener("offline",this.handleConnection),window.removeEventListener("online",this.handleConnection)},methods:{async openOfflinePopup(){await this.$refs.offlinePopup.open()},handleConnection(){navigator.onLine?this.offlinePopup=!1:this.openOfflinePopup()}}},K=s("img",{src:V,alt:"",class:"offline__icon"},null,-1),q=s("h3",{class:"offline__warning"},"\u0412\u043D\u0438\u043C\u0430\u043D\u0438\u0435!",-1),F=s("h2",null,"\u0418\u043D\u0442\u0435\u0440\u043D\u0435\u0442 \u0432 \u0434\u0430\u043D\u043D\u044B\u0439 \u043C\u043E\u043C\u0435\u043D\u0442 \u043E\u0442\u0441\u0443\u0442\u0441\u0432\u0443\u0435\u0442",-1),H=s("p",{class:"offline__text"},"\u0414\u043E \u043F\u043E\u044F\u0432\u043B\u0435\u043D\u0438\u044F \u0441\u0432\u044F\u0437\u0438 \u0432\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u043F\u043E\u0440\u0430\u0431\u043E\u0442\u0430\u0442\u044C \u043D\u0430 \u0440\u0430\u043D\u0435\u0435 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u043D\u043E\u0439 \u0432\u0435\u0440\u0441\u0438\u0438 \u043A\u043E\u043D\u0442\u0435\u043D\u0442\u0430 \u0438\u043B\u0438 \u043F\u043E\u043F\u0440\u043E\u0431\u043E\u0432\u0430\u0442\u044C \u043F\u043E\u0437\u0436\u0435.",-1),I=["onClick"];function Y(e,t,r,c,o,n){const l=d("router-view"),i=d("popup");return p(),_(u,null,[m(l),m(i,{class:"popup--offline",ref:"offlinePopup",draggable:""},{main:g(()=>[K,q,F,H]),footer:g(({confirm:a})=>[s("button",{onClick:a,class:"btn btn--primary"},"\u041F\u043E\u043D\u044F\u0442\u043D\u043E",8,I)]),_:1},512)],64)}var J=h(W,[["render",Y]]),G={state:{TM:JSON.parse(localStorage.getItem("TM"))||"\u041F\u0438\u043B\u0437\u043D\u0435\u0440"},getters:{getTM(e){return e.TM}},mutations:{setTM(e,t){localStorage.setItem("TM",JSON.stringify(t)),e.TM=t}}},Q=new M.Store({modules:{tm:G}}),X="/pilsner/pwa/bg/loading-bg-top.webp",Z="/pilsner/pwa/bg/loading-bg-bottom.webp",ee="/pilsner/pwa/icons/logo.svg";const se={name:"Loading",data(){return{loaded:!1}}},te={class:"loading"},oe=v('<div class="loading__bg-box"><img class="loading__bg loading__bg--top" src="'+X+'" alt=""><img class="loading__bg loading__bg--bottom" src="'+Z+'" alt=""></div><div class="loading__info loading__info--loaded"><img class="loading__logo" src="'+ee+'" alt=""><h2 class="text-white text-center text-huge">\u0414\u043E\u0431\u0440\u043E\u0435 \u0443\u0442\u0440\u043E,<br>\u0421\u0435\u0440\u0433\u0435\u0439</h2></div>',2),ne=[oe];function ie(e,t,r,c,o,n){return p(),_("div",te,ne)}var le=h(se,[["render",ie]]);const ae={name:"TmPopup",props:{blockedScreen:Boolean},components:{Popup:y},data(){return{TMlist:[{imgUrl:this.$getURL("/pwa/icons/pilsner.svg"),title:"\u041F\u0438\u043B\u0437\u043D\u0435\u0440"},{imgUrl:this.$getURL("/pwa/icons/kozlovitsa.svg"),title:"\u041A\u043E\u0437\u043B\u043E\u0432\u0438\u0446\u0430"},{imgUrl:this.$getURL("/pwa/icons/kozlovna.svg"),title:"\u041A\u043E\u0437\u043B\u043E\u0432\u043D\u0430"}]}},methods:{async openTMPopup(){const e=await this.$refs.TMPopup.open();e&&(this.$store.commit("setTM",e),this.$router.push({name:"dashboard"}))}}},re=s("h3",null,"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0435\u0442\u044C \u0440\u0435\u0441\u0442\u043E\u0440\u0430\u043D\u043E\u0432",-1),ce={class:"popup-TM__list"},pe=["onClick"],_e=["src"],de={class:"text-big-norm"};function ue(e,t,r,c,o,n){const l=d("popup");return p(),x(l,{blockedScreen:r.blockedScreen,ref:"TMPopup"},{main:g(()=>[re]),footer:g(({confirm:i})=>[s("ul",ce,[(p(!0),_(u,null,w(o.TMlist,a=>(p(),_("li",{key:a.title,onClick:ts=>i(a),class:"popup-TM__item"},[s("img",{src:a.imgUrl},null,8,_e),s("span",de,$(a.title),1)],8,pe))),128))])]),_:1},8,["blockedScreen"])}var L=h(ae,[["render",ue]]);const he={name:"Index",components:{Loading:le,TmPopup:L},created(){navigator.onLine&&setTimeout(async()=>await this.$refs.TMPopup.openTMPopup(),4e3)}};function me(e,t,r,c,o,n){const l=d("loading"),i=d("tm-popup");return p(),_(u,null,[m(l),m(i,{blockedScreen:"",ref:"TMPopup"},null,512)],64)}var ge=h(he,[["render",me]]),fe="/pilsner/pwa/icons/drop-arrow.svg",ve="/pilsner/pwa/picture/panel-about.jpg",we="/pilsner/pwa/picture/panel-qr.svg",$e="/pilsner/pwa/icons/patch-prize.svg",be="/pilsner/pwa/icons/news-promo.svg",ye="/pilsner/pwa/icons/pilsner-title.svg",U="/pilsner/pwa/icons/inst.svg",Le="/pilsner/pwa/icons/kozlovna-title.svg";const Ue={name:"DashBoard",components:{TmPopup:L},data(){return{gridList:[{imgUrl:this.$getURL("/pwa/icons/time.svg"),title:"\u0411\u0440\u043E\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435",classes:[null]},{imgUrl:this.$getURL("/pwa/icons/my-orders.svg"),title:"\u041C\u043E\u0438 \u0437\u0430\u043A\u0430\u0437\u044B",classes:["grid-panel__item--accent"]},{imgUrl:this.$getURL("/pwa/icons/lunch-gift.svg"),title:"\u041B\u0430\u043D\u0447-\u043A\u0430\u0440\u0442\u0430",classes:["grid-panel__item--accent"]},{imgUrl:this.$getURL("/pwa/icons/lunch.svg"),title:"\u0411\u0438\u0437\u043D\u0435\u0441-\u043B\u0430\u043D\u0447",classes:[null]},{imgUrl:this.$getURL("/pwa/icons/delivery.svg"),title:"\u0414\u043E\u0441\u0442\u0430\u0432\u043A\u0430",classes:[null]},{imgUrl:this.$getURL("/pwa/icons/pickup.svg"),title:"\u0421\u0430\u043C\u043E\u0432\u044B\u0432\u043E\u0437",classes:["grid-panel__item--accent"]},{imgUrl:this.$getURL("/pwa/icons/delivery-table.svg"),title:"\u0414\u043E\u0441\u0442\u0430\u0432\u043A\u0430 \u0434\u043E \u0441\u0442\u043E\u043B\u0430",classes:["grid-panel__item--accent"]},{imgUrl:this.$getURL("/pwa/icons/marker.svg"),title:"\u0420\u0435\u0441\u0442\u043E\u0440\u0430\u043D\u044B",classes:[null]},{imgUrl:this.$getURL("/pwa/icons/review.svg"),title:"\u041E\u0442\u0437\u044B\u0432",classes:["grid-panel__item--white","text-primary-childs"]},{imgUrl:this.$getURL("/pwa/icons/settings.svg"),title:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438",classes:["grid-panel__item--white","text-primary-childs"]}]}},methods:{openTMPopup(){this.$refs.TMPopup.openTMPopup()}}},ke={class:"dashboard section"},Pe={class:"container"},Te={class:"dashboard__wrap"},Me={class:"dashboard__header"},xe={class:"container"},Re=s("img",{src:fe,alt:""},null,-1),Ce=[Re],Se={class:"dashboard__main"},Ee={class:"panel__list"},Oe=v('<li class="panel__item"><img class="panel__bg" src="'+ve+'" alt=""><span class="title__about text-white">\u041E \u043D\u0430\u0441</span></li><li class="panel__item panel__item--primary"><div class="panel__wrap"><div class="panel__text text-white-childs"><h2>\u0411\u043E\u043D\u0443\u0441\u043D\u0430\u044F \u043A\u0430\u0440\u0442\u0430</h2><p class="text-med-norm panel-bonus">\u0414\u043E\u0441\u0442\u0443\u043F\u043D\u043E</p><span><h2>1280</h2><h4>\u0431\u043E\u043D\u0443\u0441\u043E\u0432</h4></span></div><img class="panel__qr" src="'+we+'" alt=""></div></li>',2),Be={class:"panel__item panel__item--accent"},Ne={class:"panel__wrap panel__wrap--p20"},Ae=s("img",{class:"panel__patch",src:$e,alt:""},null,-1),je={class:"panel__text text-white-childs"},ze=s("h2",null,"\u041F\u0430\u0447 \u043A\u0430\u0440\u0442\u0430",-1),De=s("p",{class:"panel-patch"},"\u0410\u043A\u0442\u0438\u0432\u043D\u043E\u0441\u0442\u044C",-1),Ve={class:"panel__patch-list"},We=["src"],Ke=s("li",{class:"panel__item"},[s("div",{class:"panel__wrap panel__wrap--news-promo"},[s("img",{src:be,alt:""}),s("h2",null,"\u041D\u043E\u0432\u043E\u0441\u0442\u0438 \u0438 \u0430\u043A\u0446\u0438\u0438")])],-1),qe={class:"grid-panel__list text-white-childs"},Fe={class:"grid-panel__img"},He=["src"],Ie={class:"grid-panel__text"},Ye={class:"text-big-bold"},Je=v('<footer class="dashboard__footer"><ul class="soc__list"><li class="soc__item"><img src="'+ye+'" alt="" class="soc__title"><img src="'+U+'" alt="" class="soc__icon"></li><li class="soc__item"><img src="'+U+'" alt="" class="soc__icon"><img src="'+Le+'" alt="soc" class="soc__title"></li></ul></footer>',1);function Ge(e,t,r,c,o,n){const l=d("tm-popup");return p(),_(u,null,[s("section",ke,[s("div",Pe,[s("div",Te,[s("header",Me,[s("div",xe,[s("h1",null,$(e.$store.getters.getTM.title),1),s("div",{onClick:t[0]||(t[0]=(...i)=>n.openTMPopup&&n.openTMPopup(...i)),class:"dashboard__drop-arrow"},Ce)])]),s("main",Se,[s("ul",Ee,[Oe,s("li",Be,[s("div",Ne,[Ae,s("div",je,[ze,De,s("ul",Ve,[(p(!0),_(u,null,w(Array(5),(i,a)=>(p(),_("li",{key:i,class:f({"panel__patch-item":!0,"panel__patch-item--has":a<=2})},[s("img",{src:a<=2?e.$getURL("/pwa/icons/patch-has.svg"):e.$getURL("/pwa/icons/patch.svg"),alt:""},null,8,We)],2))),128))])])])]),Ke]),s("ul",qe,[(p(!0),_(u,null,w(o.gridList,i=>(p(),_("li",{key:i.title,class:f(["grid-panel__item",...i.classes])},[s("div",Fe,[s("img",{src:i.imgUrl,alt:""},null,8,He)]),s("div",Ie,[s("p",Ye,$(i.title),1)])],2))),128))])]),Je])])]),m(l,{ref:"TMPopup"},null,512)],64)}var Qe=h(Ue,[["render",Ge]]);const Xe=[{path:"/",name:"index",component:ge},{path:"/dashboard",name:"dashboard",component:Qe},{path:"/:pathMatch(.*)*",redirect:{name:"index"}}],Ze=R({history:C("/pilsner/"),routes:Xe});var es={install:e=>{e.config.globalProperties.$getURL=t=>"/pilsner/"+(t.startsWith("/")?t.slice(1):t)}};function ss(e={}){const{immediate:t=!1,onNeedRefresh:r,onOfflineReady:c,onRegistered:o,onRegisterError:n}=e;let l;const i=async(a=!0)=>{};return"serviceWorker"in navigator&&(l=new S("/pilsner/sw.js",{scope:"/pilsner/",type:"classic"}),l.addEventListener("activated",a=>{a.isUpdate?window.location.reload():c==null||c()}),l.register({immediate:t}).then(a=>{o==null||o(a)}).catch(a=>{n==null||n(a)})),i}ss({onRegistered(e){e.update(),e&&setInterval(()=>{e.update()},60*60*1e3)}});E(J).use(Ze).use(Q).use(es).use(O).mount("#app");
